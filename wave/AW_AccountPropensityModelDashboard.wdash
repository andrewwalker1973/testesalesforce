{"dataSourceLinks":[],"filters":[],"gridLayouts":[{"name":"Default","numColumns":1,"pages":[{"label":"Top 5 Recommendation","name":"b2f9714e-678f-44de-8d8f-214b47596a55","navigationHidden":false,"widgets":[{"colspan":1,"column":0,"name":"container_1","row":0,"rowspan":42,"widgetStyle":{"backgroundColor":"#FFFFFF","borderColor":"#E6ECF2","borderEdges":["bottom"],"borderRadius":0,"borderWidth":1}},{"colspan":1,"column":0,"name":"image_3","row":0,"rowspan":6,"widgetStyle":{"backgroundColor":"rgb(144, 208, 254)","borderColor":"#E6ECF2","borderEdges":[],"borderRadius":0,"borderWidth":1}},{"colspan":1,"column":0,"name":"table_2","row":7,"rowspan":32,"widgetStyle":{"borderEdges":[]}},{"colspan":1,"column":0,"name":"link_2","row":39,"rowspan":3,"widgetStyle":{"backgroundColor":"#FFFFFF","borderColor":"#E6ECF2","borderEdges":[],"borderRadius":0,"borderWidth":1}}]},{"label":"All Reccommendation","name":"b5db7703-c8b7-4d43-bfa8-a2cecf30d3cb","navigationHidden":false,"widgets":[{"colspan":1,"column":0,"name":"container_2","row":0,"rowspan":43,"widgetStyle":{"borderEdges":[]}},{"colspan":1,"column":0,"name":"image_1","row":0,"rowspan":7,"widgetStyle":{"borderEdges":[]}},{"colspan":1,"column":0,"name":"table_3","row":8,"rowspan":30,"widgetStyle":{"borderEdges":[]}},{"colspan":1,"column":0,"name":"link_1","row":39,"rowspan":3,"widgetStyle":{"borderEdges":[]}}]}],"rowHeight":"fine","selectors":[],"style":{"alignmentX":"left","alignmentY":"top","backgroundColor":"#F2F6FA","cellSpacingX":0,"cellSpacingY":0,"fit":"original","gutterColor":"#C5D3E0"},"version":1.0}],"layouts":[],"steps":{"lens_1":{"broadcastFacet":true,"groups":[],"label":"lens_1","numbers":[],"query":"q = load \"AW_AccountPropensityModelResultWithStatus\";\n\nq = foreach q generate 'Predicted_Annuity_Score' as 'Predicted_Annuity_Score', 'Predicted_Bond_Score' as 'Predicted_Bond_Score', 'Predicted_Education_Score' as 'Predicted_Education_Score', 'Predicted_Investment_Score' as 'Predicted_Investment_Score', 'Predicted_Retirement_Score' as 'Predicted_Retirement_Score', 'ownerNationalIdCalculated' as 'ownerNationalIdCalculated' ,'Account.Id' as 'Account.Id','Account.Name' as 'Account.Name';\n\nq = foreach q generate 'Account.Id' as 'Account.Id','Account.Name' as 'Account.Name', 'ownerNationalIdCalculated', 'Predicted_Annuity_Score' , 'Predicted_Bond_Score','Predicted_Education_Score' ,'Predicted_Investment_Score', 'Predicted_Retirement_Score',case when 'Predicted_Retirement_Score'>42.6 && 'Predicted_Retirement_Score' < 100  then 1 end as 'RA_Bucket',case when 'Predicted_Annuity_Score'>9.5 && 'Predicted_Annuity_Score' < 100  then 1 end as 'Ann_Bucket',case when 'Predicted_Investment_Score'>14 && 'Predicted_Investment_Score' < 100  then 1 end as 'Inv_Bucket' ;\n\nq = foreach q generate 'Account.Id', 'Account.Name','ownerNationalIdCalculated', 'Predicted_Annuity_Score' , 'Predicted_Bond_Score','Predicted_Education_Score' ,'Predicted_Investment_Score', 'Predicted_Retirement_Score', coalesce (max('RA_Bucket') + max('Inv_Bucket') + max('Ann_Bucket'),0) as 'BucketScore';\n\nq_An = foreach q generate 'Account.Id', 'Account.Name','ownerNationalIdCalculated','BucketScore','Predicted_Annuity_Score' as 'Score' ,\"Annuity\" as 'ProductGroup';\nq_Inv = foreach q generate 'Account.Id', 'Account.Name', 'ownerNationalIdCalculated','BucketScore','Predicted_Investment_Score' as 'Score' ,\"Investment\" as 'ProductGroup';\nq_RA = foreach q generate 'Account.Id', 'Account.Name','ownerNationalIdCalculated','BucketScore','Predicted_Retirement_Score' as 'Score' ,\"Retirement Annuity\" as 'ProductGroup';\nresult = union q_An,q_Inv,q_RA;\n\nresult = group result by ('ownerNationalIdCalculated', 'Account.Id', 'Account.Name','ProductGroup','BucketScore');\n\nresult = foreach result generate 'Account.Id', 'Account.Name','ownerNationalIdCalculated','ProductGroup','BucketScore',max('Score') as 'Score',rank() over([..] partition by 'ownerNationalIdCalculated' order by max('Score') desc) as 'rank_cal';\n\nresult = filter result by 'rank_cal' < 3;\n\nresult = group result by ('ownerNationalIdCalculated','Account.Id', 'Account.Name','ProductGroup','BucketScore' ) ;\n\nresult = foreach result  generate 'Account.Id', 'Account.Name', 'ownerNationalIdCalculated', 'ProductGroup' as 'ProductGroup','BucketScore', max('Score') as 'Score',avg(sum('Score')) over([..] partition by 'ownerNationalIdCalculated' )  as 'AvgScore',max('rank_cal') as 'rank_cal';\n\nresult = order result by ('BucketScore' desc, 'AvgScore' desc );\n\nresult  = limit result 10;\nresult = group result by ('ownerNationalIdCalculated','Account.Id', 'Account.Name','ProductGroup');\nresult = foreach result generate  'Account.Name','ProductGroup' ,max('Score') as'Score' , rank() over([..] partition by 'ownerNationalIdCalculated' order by max('Score') desc) as 'Score Rank';\n","receiveFacetSource":{"mode":"all","steps":[]},"selectMode":"single","strings":[],"type":"saql","useGlobal":true,"visualizationParameters":{"parameters":{"borderColor":"#a8b7c7","borderWidth":1,"cell":{"backgroundColor":"#ffffff","fontColor":"#16325c","fontSize":12},"columnProperties":{},"columns":[],"customBulkActions":[],"header":{"backgroundColor":"#16325c","fontColor":"#ffffff","fontSize":12},"innerMajorBorderColor":"#54698d","innerMinorBorderColor":"#a8b7c7","mode":"fittocontainer","numberOfLines":1,"pivoted":false,"showActionMenu":true,"totals":true,"verticalPadding":8},"type":"table"}},"lens_2":{"broadcastFacet":true,"groups":[],"label":"lens_2","numbers":[],"query":"q = load \"AW_AccountPropensityModelResultWithStatus\";\n\nq = foreach q generate 'Predicted_Annuity_Score' as 'Predicted_Annuity_Score', 'Predicted_Bond_Score' as 'Predicted_Bond_Score', 'Predicted_Education_Score' as 'Predicted_Education_Score', 'Predicted_Investment_Score' as 'Predicted_Investment_Score', 'Predicted_Retirement_Score' as 'Predicted_Retirement_Score', 'ownerNationalIdCalculated' as 'ownerNationalIdCalculated' ,'Account.Id' as 'Account.Id','Account.Name' as 'Account.Name';\n\nq = foreach q generate 'Account.Id' as 'Account.Id','Account.Name' as 'Account.Name', 'ownerNationalIdCalculated', 'Predicted_Annuity_Score' , 'Predicted_Bond_Score','Predicted_Education_Score' ,'Predicted_Investment_Score', 'Predicted_Retirement_Score',case when 'Predicted_Retirement_Score'>42.6 && 'Predicted_Retirement_Score' < 100  then 1 end as 'RA_Bucket',case when 'Predicted_Annuity_Score'>9.5 && 'Predicted_Annuity_Score' < 100  then 1 end as 'Ann_Bucket',case when 'Predicted_Investment_Score'>14 && 'Predicted_Investment_Score' < 100  then 1 end as 'Inv_Bucket' ;\n\nq = foreach q generate 'Account.Id', 'Account.Name','ownerNationalIdCalculated', 'Predicted_Annuity_Score' , 'Predicted_Bond_Score','Predicted_Education_Score' ,'Predicted_Investment_Score', 'Predicted_Retirement_Score', coalesce (max('RA_Bucket') + max('Inv_Bucket') + max('Ann_Bucket') , 0) as 'BucketScore';\n\nq_An = foreach q generate 'Account.Id', 'Account.Name','ownerNationalIdCalculated','BucketScore','Predicted_Annuity_Score' as 'Score' ,\"Annuity\" as 'ProductGroup';\nq_Inv = foreach q generate 'Account.Id', 'Account.Name', 'ownerNationalIdCalculated','BucketScore','Predicted_Investment_Score' as 'Score' ,\"Investment\" as 'ProductGroup';\nq_RA = foreach q generate 'Account.Id', 'Account.Name','ownerNationalIdCalculated','BucketScore','Predicted_Retirement_Score' as 'Score' ,\"Retirement Annuity\" as 'ProductGroup';\nresult = union q_An,q_Inv,q_RA;\n\nresult = group result by ('ownerNationalIdCalculated', 'Account.Id', 'Account.Name','ProductGroup','BucketScore');\n\nresult = foreach result generate 'Account.Id', 'Account.Name','ownerNationalIdCalculated','ProductGroup','BucketScore',max('Score') as 'Score',rank() over([..] partition by 'ownerNationalIdCalculated' order by max('Score') desc) as 'rank_cal';\n\n--result = filter result by 'rank_cal' < 3;\n\nresult = group result by ('ownerNationalIdCalculated','Account.Id', 'Account.Name','ProductGroup','BucketScore' ) ;\n\nresult = foreach result  generate 'Account.Id', 'Account.Name', 'ownerNationalIdCalculated', 'ProductGroup' as 'ProductGroup','BucketScore', max('Score') as 'Score',avg(sum('Score')) over([..] partition by 'ownerNationalIdCalculated' )  as 'AvgScore',max('rank_cal') as 'rank_cal';\n\nresult = order result by ('BucketScore' desc, 'AvgScore' desc );\n\nresult  = limit result 300;\nresult = group result by ('ownerNationalIdCalculated','Account.Id', 'Account.Name','ProductGroup');\nresult = foreach result generate  'Account.Name','ProductGroup' ,max('Score') as'Score' , rank() over([..] partition by 'ownerNationalIdCalculated' order by max('Score') desc) as 'Score Rank';\n","receiveFacetSource":{"mode":"all","steps":[]},"selectMode":"single","strings":[],"type":"saql","useGlobal":true,"visualizationParameters":{"parameters":{"borderColor":"#a8b7c7","borderWidth":1,"cell":{"backgroundColor":"#ffffff","fontColor":"#16325c","fontSize":12},"columnProperties":{},"columns":[],"customBulkActions":[],"header":{"backgroundColor":"#16325c","fontColor":"#ffffff","fontSize":11},"innerMajorBorderColor":"#54698d","innerMinorBorderColor":"#a8b7c7","mode":"fittocontainer","numberOfLines":1,"pivoted":false,"showActionMenu":true,"totals":true,"verticalPadding":8},"type":"table"}}},"widgetStyle":{"backgroundColor":"#FFFFFF","borderColor":"#E6ECF2","borderEdges":[],"borderRadius":0,"borderWidth":1},"widgets":{"table_2":{"parameters":{"borderColor":"#a8b7c7","borderWidth":1,"cell":{"backgroundColor":"#ffffff","fontColor":"#16325c","fontSize":12},"columnProperties":{},"columns":[],"customBulkActions":[],"exploreLink":false,"header":{"backgroundColor":"#16325c","fontColor":"#ffffff","fontSize":12},"innerMajorBorderColor":"#54698d","innerMinorBorderColor":"#a8b7c7","mode":"fittocontainer","numberOfLines":1,"pivoted":false,"showActionMenu":true,"step":"lens_1","totals":true,"verticalPadding":8},"type":"table"},"table_3":{"parameters":{"borderColor":"#a8b7c7","borderWidth":1,"cell":{"backgroundColor":"#ffffff","fontColor":"#16325c","fontSize":12},"columnProperties":{},"columns":[],"customBulkActions":[],"exploreLink":false,"header":{"backgroundColor":"#16325c","fontColor":"#ffffff","fontSize":11},"innerMajorBorderColor":"#54698d","innerMinorBorderColor":"#a8b7c7","mode":"fittocontainer","numberOfLines":1,"pivoted":false,"showActionMenu":true,"step":"lens_2","totals":true,"verticalPadding":8},"type":"table"},"container_1":{"parameters":{"alignmentX":"left","alignmentY":"top","fit":"original"},"type":"container"},"container_2":{"parameters":{"alignmentX":"left","alignmentY":"top","fit":"original"},"type":"container"},"image_1":{"parameters":{"alignmentX":"left","alignmentY":"top","fit":"stretch","image":{"name":"DashboardHeaderpng1","namespace":""}},"type":"image"},"image_3":{"parameters":{"alignmentX":"left","alignmentY":"top","fit":"stretch","image":{"name":"DashboardHeaderpng","namespace":""}},"type":"image"},"link_1":{"parameters":{"destinationLink":{"name":"b2f9714e-678f-44de-8d8f-214b47596a55"},"destinationType":"page","fontSize":16,"includeState":false,"text":"Back","textAlignment":"left","textColor":"#0070D2"},"type":"link"},"link_2":{"parameters":{"destinationLink":{"name":"b5db7703-c8b7-4d43-bfa8-a2cecf30d3cb"},"destinationType":"page","fontSize":14,"includeState":false,"text":"View All Recommendations","textAlignment":"left","textColor":"#0070D2"},"type":"link"}}}