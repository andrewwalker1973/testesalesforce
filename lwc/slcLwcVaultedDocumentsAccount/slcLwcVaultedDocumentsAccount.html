<!-- /**
* @description LWC Component used to display the vaulted documents from the DocumentCheckList Item.
*
* @author Futureform
*
* @see 
*
* @date October 2022
* -->
<template>
    <!-- Internal Document Vault -->
    <template if:false={clientOnboarding}>
        <template if:true={internalVault}>
            <lightning-card>
                <div if:true={isLoading}>
                    <lightning-spinner alternative-text={helpText} class="spinner-medium" data-text={helpText} size="medium" variant="brand"></lightning-spinner>
                </div>
                <!--Main page-->
                <lightning-card>
                    <div class="slds-grid slds-grid_vertical">
                        <div class="slds-col">
                            <div class="slds-clearfix">
                                <lightning-button if:true={enableUpload} class="slds-p-around_x-small slds-float_right" label="New" onclick={handleNew} slot="actions"
                                                  variant="brand"></lightning-button>
                                <lightning-button class="slds-p-around_x-small slds-float_right" label="De-Link" onclick={handleDelink} slot="actions"
                                                  variant="brand"></lightning-button>
                            </div>
                        </div>
                        <div class="slds-grid slds-gutters">
                            <div class="slds-col slds-size_1-of-3 slds-p-bottom_large" if:true={showAccountDropbox}>
                                <lightning-combobox if:true={accountOptions} name="accountSelector" placeholder="Account"
                                                    options={accountOptions} value={recordId}
                                                    onchange={handleChangeAccount}
                                                    label="Account"></lightning-combobox>
                            </div>
                            <div class="slds-col slds-size_1-of-3 slds-p-bottom_large" if:true={isLegalType}>
                                <lightning-combobox placeholder="Legal Type"
                                                    class='subtype-filter'
                                                    options={legalSubtypeOptions} value='all'
                                                    onchange={handleLegalSubtype}
                                                    label="Category"></lightning-combobox>
                            </div>                                
                            <div class="slds-col slds-size_1-of-3 slds-p-bottom_large" if:true={isReportType}>
                                <lightning-combobox placeholder="Report Type"
                                                    class='subtype-filter'
                                                    options={reportSubtypeOptions} value='all'
                                                    onchange={handleReportSubtype}
                                                    label="Category"></lightning-combobox>
                            </div>
                            <div class="slds-col slds-size_1-of-3 slds-p-bottom_large" if:true={isCommunicationType}>
                                <lightning-combobox placeholder="Communication Type"
                                                    class='subtype-filter'
                                                    options={communicationSubtypeOptions} value='all'
                                                    onchange={handleCommunicationSubtype}
                                                    label="Category"></lightning-combobox>
                            </div>
                            <div class="slds-col slds-size_1-of-3 slds-p-bottom_large" if:true={isPresentationType}>
                                <lightning-combobox placeholder="Presentation Type"
                                                    class='subtype-filter'
                                                    options={presentationSubtypeOptions} value='all'
                                                    onchange={handlePresentationSubtype}
                                                    label="Category"></lightning-combobox>
                            </div>
                            <div class="slds-col slds-size_1-of-3 slds-p-bottom_large" if:true={enableFilter}>
                                <lightning-combobox name="documentTypeFilters"
                                                    class='document-type-filter'
                                                    placeholder="Document Type Filter" 
                                                    options={filterOptions} value='all'
                                                    onchange={handleFilterDocuments}
                                                    label="Document Type">
                                </lightning-combobox>
                            </div>
                        </div>

                        <div class="slds-col">
                            <div class='slds-grid slds-grid_align-spread'>

                                <div class='slds-col slds-p-around_medium slds-m-vertical_x-small'>
                                        Documents per page
                                </div>
                                <div class='slds-col slds-p-around_medium slds-large-size_1-of-7'>
                                    <lightning-combobox
                                            value={recordsPerPage}
                                            variant="label-hidden"
                                            class='record-per-page'
                                            options={recordsPerPageOptions}
                                            onchange={changeRecordPerPage}>
                                    </lightning-combobox>
                                </div>

                                <div class='slds-col slds-p-around_medium slds-large-size_3-of-7'>
                                </div>

                                <div class='slds-col slds-p-around_medium slds-large-size_2-of-7'>
                                    <span class='slds-float_right'>
                                        <lightning-button-icon size='small'
                                           disabled={disablePrior}
                                           onclick={priorPage}
                                           variant="container"
                                           icon-name='utility:left'>

                                        </lightning-button-icon>

                                        Page&nbsp;

                                        <input
                                                class='slds-input record-per-page'
                                                type="number"
                                                value={pageNumber}
                                                onchange={handleChangePage}
                                                max={pageCount}
                                                min='1'
                                                step='1'/>

                                        &nbsp;of&nbsp;{pageCount}

                                        <lightning-button-icon size='small'
                                                               disabled={disableNext}
                                                               onclick={nextPage}
                                                               variant="container"
                                                               icon-name='utility:right'>

                                        </lightning-button-icon>
                                    </span>
                                </div>
                            </div>
                          
                            <lightning-datatable columns={columns}
                                                 onrowaction={handleRowAction}
                                                 data={documentsToDisplay}
                                                 default-sort-direction={defaultSortDirection} key-field="Id"
                                                 onrowselection={handleVaultedSelection} onsort={handleOnSort}
                                                 sorted-by={sortedBy}
                                                 sorted-direction={sortDirection}
                                                 hide-checkbox-column>
                            </lightning-datatable>
                        </div>
                    </div>
                </lightning-card>
                <!--Delink-->
                <lightning-card if:true={isDelink}>
                    <div class="slds-container_small">
                        <section aria-describedby="modal-content-id-1" aria-labelledby="modal-heading-01" aria-modal="true" class="slds-modal slds-fade-in-open"
                                 role="dialog" tabindex="-1">
                            <div class="slds-modal__container customModal">
                                <header class="slds-modal__header">
                                    <div class="slds-grid slds-grid_vertical-align-center">
                                        <div class="slds-col">
                                            <h2 class="slds-text-heading_small slds-p-bottom_xx-small">
                                                Document Checklist Items </h2>
                                        </div>
                                    </div>
                                </header>
                                <div class="slds-modal__content slds-p-around_medium" id="modal-content-id-delink">
                                    <lightning-datatable columns={deleteColumns} data={delinkDocuments}
                                                         data-id="DocumentList"
                                                         default-sort-direction={defaultSortDirection} key-field="Id"
                                                         onrowselection={handleSelection} onsort={handleOnSort}
                                                         sorted-by={sortedBy}
                                                         sorted-direction={sortDirection}>
                                    </lightning-datatable>
                                </div>
                                <footer class="slds-modal__footer">
                                    <div class="slds-clearfix">
                                        <lightning-button class="slds-p-around_x-small slds-float_right" label="Cancel" onclick={handleCloseDelink}
                                                          variant="neutral">

                                        </lightning-button>
                                        <lightning-button class="slds-p-around_x-small slds-float_right" label="Next" onclick={handleReasonSelection}
                                                          variant="brand"></lightning-button>
                                    </div>
                                </footer>
                            </div>
                        </section>
                        <div class="slds-backdrop slds-backdrop_open"></div>
                    </div>
                </lightning-card>
                <!--Reason for Delink-->
                <lightning-card if:true={isReasonSelection}>
                    <div class="slds-container_small">
                        <section aria-describedby="modal-content-id-1" aria-labelledby="modal-heading-01" aria-modal="true" class="slds-modal slds-fade-in-open"
                                 role="dialog" tabindex="-1">
                            <div class="slds-modal__container customModal">
                                <header class="slds-modal__header">
                                    <div class="slds-grid slds-grid_vertical-align-center">
                                        <div class="slds-col">
                                            <h2 class="slds-text-heading_medium slds-hyphenate" id="modal-heading-reason">
                                                {label.selectReasonHeading} </h2>
                                        </div>
                                    </div>
                                </header>
                                <div class="slds-modal__content slds-p-around_medium" id="modal-content-id-reason">
                                    <lightning-textarea data-field="delink-reason" label={label.selectReasonInputHeading} name="input-reason"
                                                        required></lightning-textarea>
                                </div>
                                <footer class="slds-modal__footer">
                                    <div class="slds-clearfix">
                                        <lightning-button class="slds-p-around_x-small slds-float_right" label="Cancel" onclick={handleCloseConfirmation}
                                                          variant="neutral">

                                        </lightning-button>
                                        <lightning-button class="slds-p-around_x-small slds-float_right" label="Next" onclick={handleConfirmation}
                                                          variant="brand"></lightning-button>
                                    </div>
                                </footer>
                            </div>
                        </section>
                        <div class="slds-backdrop slds-backdrop_open"></div>
                    </div>
                </lightning-card>
                <!--Confirmation on Delink-->
                <lightning-card if:true={isConfirmation}>
                    <div class="slds-container_small">
                        <section aria-describedby="modal-content-id-1" aria-labelledby="modal-heading-01" aria-modal="true" class="slds-modal slds-fade-in-open"
                                 role="dialog" tabindex="-1">
                            <div class="slds-modal__container customModal">
                                <header class="slds-modal__header">
                                    <div class="slds-grid slds-grid_vertical-align-center">
                                        <lightning-icon alternative-text="Warning!" icon-name="utility:warning" title="warning variant"
                                                        variant="warning"></lightning-icon>
                                        <div class="slds-col">
                                            <h2 class="slds-text-heading_medium slds-hyphenate" id="modal-heading-01">
                                                {label.warningHeaderMessage} </h2>
                                        </div>
                                    </div>
                                </header>
                                <div class="slds-modal__content slds-p-around_medium" id="modal-content-id-1">
                                    <h1>
                                        <b>{label.deleteChecklistItemWarningMessage}
                                        </b>
                                    </h1>
                                    </br>
                                    <lightning-datatable columns={deleteColumns} data={selectedItemsToDelete} hide-checkbox-column="true" key-field="Id"
                                                         show-row-number-column="true"></lightning-datatable>

                                </div>
                                <footer class="slds-modal__footer">
                                    <div class="slds-clearfix">
                                        <lightning-button class="slds-p-around_x-small slds-float_right" label="Cancel" onclick={handleCloseConfirmation}
                                                          variant="neutral">

                                        </lightning-button>
                                        <lightning-button class="slds-p-around_x-small slds-float_right" label="Confirm" onclick={handleDelete}
                                                          variant="brand"></lightning-button>
                                    </div>
                                </footer>
                            </div>
                        </section>
                        <div class="slds-backdrop slds-backdrop_open"></div>
                    </div>
                </lightning-card>
                <!--Upload-->
                <lightning-card if:true={isUpload}>
                    <div class="slds-container_small">
                        <section aria-describedby="modal-content-id-3" aria-labelledby="modal-heading-03" aria-modal="true" class="slds-modal slds-fade-in-open"
                                 role="dialog" tabindex="-1">
                            <div class="slds-modal__container">
                                <div if:true={isLoading}>
                                    <lightning-spinner alternative-text={helpText} class="spinner-medium" data-text={helpText} size="medium"
                                                       variant="brand"></lightning-spinner>
                                </div>
                                <header class="slds-modal__header">
                                    <div class="slds-col">
                                        <h2 class="slds-text-heading_medium slds-hyphenate" id="modal-heading-03">
                                            Upload Document on Checklist Item </h2>
                                    </div>
                                </header>
                                <div class="slds-modal__content slds-p-around_medium" id="modal-content-id-3">
                                    <lightning-layout-item padding="around-small" size="6">
                                        <lightning-input accept=".png, .jpg, .jpeg, .pdf" label="Upload File" name="uploadFile" onchange={handleFileUpload}
                                                         type="file"></lightning-input>
                                        <div class="slds-m-around_small">
                                            <template if:true={uploadFileName}>
                                                {uploadFileName}
                                            </template>
                                        </div>
                                    </lightning-layout-item>
                                </div>
                                <footer class="slds-modal__footer">
                                    <div class="slds-clearfix">
                                        <lightning-button class="slds-p-around_x-small slds-float_right" label="Save" onclick={handleFetchFiles}
                                                          variant="brand"></lightning-button>

                                        <lightning-button class="slds-p-around_x-small slds-float_right" label="Cancel" onclick={handleUploadClose}
                                                          variant="neutral"></lightning-button>
                                    </div>
                                </footer>
                            </div>
                        </section>
                        <div class="slds-backdrop slds-backdrop_open"></div>
                    </div>
                </lightning-card>
                <!--New or Edit-->
                <template if:true={createOrEditModal}>
                    <section aria-describedby="modal-content-id-4" aria-labelledby="modal-heading-04" aria-modal="true" class="slds-modal slds-fade-in-open"
                             role="dialog" tabindex="-1">
                        <div class="slds-modal__container">
                            <div if:true={isLoading}>
                                <lightning-spinner alternative-text={helpText} class="spinner-medium" data-text={helpText} size="medium"
                                                   variant="brand"></lightning-spinner>
                            </div>
                            <div if:true={isLoadingReclassify}>
                                <lightning-spinner alternative-text={helpText} class="spinner-medium" data-text={helpText} size="medium"
                                                   variant="brand"></lightning-spinner>
                            </div>
                            <header class="slds-modal__header">
                                <button class="slds-button slds-button_icon slds-modal__close slds-button_icon-inverse" onclick={handleClose} title="Close">
                                    <lightning-icon alternative-text="close" icon-name="utility:close" size="small" variant="inverse"></lightning-icon>
                                </button>
                                <template if:false={isEdit}>
                                    <h2 class="slds-text-heading_medium slds-hyphenate">Create New Document Checklist Item </h2>
                                </template>
                                <template if:true={isEdit}>
                                    <h2 class="slds-text-heading_medium slds-hyphenate">Edit {currentListItemName} </h2>
                                </template>
                            </header>
                            <div class="slds-theme_default slds-p-around_medium">
                                <lightning-record-edit-form object-api-name="DocumentChecklistItem" record-id={currentListItemId}>
                                    <lightning-layout multiple-rows style="height: max-content;">
                                        <!--Document Type-->
                                        <lightning-layout-item padding="around-small" size="6">
                                            <lightning-combobox name="docTypesCSVList" placeholder="Select Document Type" label="Document Type" onchange={handleTypeChange}
                                                                options={docTypesOptions} required=true></lightning-combobox>
                                        </lightning-layout-item>
                                        <!--Name-->
                                        <lightning-layout-item padding="around-small" size="6">
                                            <lightning-input-field data-field="current-listitem-name" field-name="Name"
                                                                   value={currentListItemName}></lightning-input-field>
                                        </lightning-layout-item>
                                        <!--Status-->
                                        <lightning-layout-item padding="around-small" size="6">
                                            <lightning-combobox label="Status" name="status" onchange={handleStatusChange} options={statusValues}
                                                                value={currentListItemStatus}></lightning-combobox>
                                        </lightning-layout-item>
                                        <!--Document Date-->
                                        <lightning-input type="date" name="documentDateField" label="Document Date" class="slds-p-around_small slds-size_6-of-12"
                                                        data-field="documentdate-input" required></lightning-input>
                                        <!--Required Checkbox-->
                                        <template if:true={isEdit}>
                                            <lightning-layout-item>
                                                <div class="slds-p-around_x-large slds-size_12-of-12">
                                                    <lightning-input checked={documentRequired} label="Required" onchange={handleRequired}  type="checkbox" value={documentRequired}></lightning-input>
                                                </div>
                                            </lightning-layout-item>
                                        </template>
                                        <!--Upload Button-->
                                        <template if:false={isEdit}>
                                            <template if:true={enableUpload}>
                                                <lightning-layout-item padding="around-small" size="6">
                                                    <lightning-input accept=".png, .jpg, .jpeg, .pdf" label="Upload File" name="uploadFile" onchange={handleFileUpload}
                                                                    type="file"></lightning-input>
                                                    <div class="slds-m-around_small">
                                                        <template if:true={uploadFileName}>
                                                            {uploadFileName}
                                                        </template>
                                                    </div>
                                                </lightning-layout-item>
                                            </template>
                                        </template>
                                        <template if:true={showReason}>
                                            <lightning-layout-item padding="around-small" size="12">
                                                <lightning-input-field data-field="current-listitem-reason" field-name="CMN_Reason__c" required="true"
                                                                       value={currentListItemReason}></lightning-input-field>
                                            </lightning-layout-item>
                                        </template>
                                        <lightning-input-field class="slds-hide" data-field="current-listitem-id" field-name="Id"
                                                               value={currentListItemId}></lightning-input-field>
                                    </lightning-layout>
                                </lightning-record-edit-form>
                            </div>
                            <footer class="slds-modal__footer">
                                <div class="slds-clearfix">
                                    <lightning-button class="slds-p-around_x-small slds-float_right" label="Save" onclick={handleSave}
                                                      variant="brand"></lightning-button>
                                    <lightning-button class="slds-p-around_x-small slds-float_right" label="Cancel" onclick={handleClose}
                                                      variant="neutral"></lightning-button>
                                </div>
                            </footer>
                        </div>
                    </section>
                    <div class="slds-backdrop slds-backdrop_open"></div>
                </template>
            </lightning-card>
        </template>
        <!-- External Document Vault -->
            <template if:true={externalVault}>
                <div class='portal-card'>
                    <lightning-card class=''>
                        <div if:true={isLoading}>
                            <lightning-spinner alternative-text={helpText} class="spinner-medium" data-text={helpText} size="medium" variant="brand"></lightning-spinner>
                        </div>
                        <!--Main page-->
                        <lightning-card>
                            <div class="slds-grid slds-grid_vertical">
                                <div class="slds-col">
                                    <div class="slds-clearfix">
                                        <lightning-button if:true={enableUpload} class="slds-p-around_x-small slds-float_right" label="New" onclick={handleNew} slot="actions"
                                                          variant="brand"></lightning-button>
                                    </div>
                                </div>
                                <div class="slds-grid slds-gutters">
                                    <div class="slds-col slds-size_1-of-3 slds-p-bottom_large" if:true={showAccountDropbox}>
                                        <lightning-combobox if:true={accountOptions} name="accountSelector" placeholder="Account"
                                                            options={accountOptions} value={recordId}
                                                            onchange={handleChangeAccount}
                                                            label="Account"></lightning-combobox>
                                    </div>
                                    <div class="slds-col slds-size_1-of-3 slds-p-bottom_large" if:true={isLegalType}>
                                        <lightning-combobox placeholder="Legal Type"
                                                            options={legalSubtypeOptions} value=''
                                                            onchange={handleLegalSubtype}
                                                            label="Category"></lightning-combobox>
                                    </div>                                
                                    <div class="slds-col slds-size_1-of-3 slds-p-bottom_large" if:true={isReportType}>
                                        <lightning-combobox placeholder="Report Type"
                                                            options={reportSubtypeOptions} value=''
                                                            onchange={handleReportSubtype}
                                                            label="Category"></lightning-combobox>
                                    </div>
                                    <div class="slds-col slds-size_1-of-3 slds-p-bottom_large" if:true={isCommunicationType}>
                                        <lightning-combobox placeholder="Communication Type"
                                                            options={communicationSubtypeOptions} value=''
                                                            onchange={handleCommunicationSubtype}
                                                            label="Category"></lightning-combobox>
                                    </div>
                                    <div class="slds-col slds-size_1-of-3 slds-p-bottom_large" if:true={isPresentationType}>
                                        <lightning-combobox placeholder="Presentation Type"
                                                            options={presentationSubtypeOptions} value=''
                                                            onchange={handlePresentationSubtype}
                                                            label="Category"></lightning-combobox>
                                    </div>
                                    <div class="slds-col slds-size_1-of-3 slds-p-bottom_large" if:true={enableFilter}>
                                        <lightning-combobox name="documentTypeFilters"
                                                            placeholder="Document Type Filter" 
                                                            options={filterOptions} value=''
                                                            onchange={handleFilterDocuments}
                                                            label="Document Type">
                                        </lightning-combobox>
                                    </div>
                                </div>

                                <div class="slds-col">
                                    <div class='slds-grid slds-grid_align-spread'>

                                        <div class='slds-col slds-p-around_medium slds-m-vertical_x-small'>
                                            Documents per page
                                        </div>
                                        <div class='slds-col slds-p-around_medium slds-large-size_1-of-7'>
                                            <lightning-combobox
                                                    value={recordsPerPage}
                                                    variant="label-hidden"
                                                    class='record-per-page'
                                                    options={recordsPerPageOptions}
                                                    onchange={changeRecordPerPage}>
                                            </lightning-combobox>
                                        </div>

                                        <div class='slds-col slds-p-around_medium slds-large-size_3-of-7'>
                                        </div>

                                        <div class='slds-col slds-p-around_medium slds-large-size_3-of-7'>
                                        <span class='slds-float_right'>
                                            <lightning-button-icon size='small'
                                                                   disabled={disablePrior}
                                                                   onclick={priorPage}
                                                                   variant="container"
                                                                   icon-name='utility:left'>

                                            </lightning-button-icon>

                                            Page&nbsp;

                                            <input
                                                    class='slds-input record-per-page'
                                                    type="number"
                                                    value={pageNumber}
                                                    onchange={handleChangePage}
                                                    max={pageCount}
                                                    min='1'
                                                    step='1'/>

                                            &nbsp;of&nbsp;{pageCount}

                                            <lightning-button-icon size='small'
                                                                   disabled={disableNext}
                                                                   onclick={nextPage}
                                                                   variant="container"
                                                                   icon-name='utility:right'>

                                            </lightning-button-icon>
                                        </span>
                                        </div>
                                    </div>
                                    <div class="tableCss">
                                        <lightning-datatable columns={columns} data={documentsToDisplay} default-sort-direction={defaultSortDirection} key-field="Id"
                                                         onrowselection={handleVaultedSelection} onrowaction={handleRowAction} onsort={handleOnSort} sorted-by={sortedBy} sorted-direction={sortDirection}
                                                         hide-checkbox-column>
                                        </lightning-datatable>
                                    </div>                   
                                </div>
                            </div>
                        </lightning-card>   
                        <!--New or Edit-->
                        <template if:true={createOrEditModal}>
                            <section aria-describedby="modal-content-id-4" aria-labelledby="modal-heading-04" aria-modal="true" class="slds-modal slds-fade-in-open"
                                     role="dialog" tabindex="-1">
                                <div class="slds-modal__container">
                                    <div if:true={isLoadingReclassify}>
                                        <lightning-spinner alternative-text={helpText} class="spinner-medium" data-text={helpText} size="medium"
                                                           variant="brand"></lightning-spinner>
                                    </div>
                                    <header class="slds-modal__header">
                                        <button class="slds-button slds-button_icon slds-modal__close slds-button_icon-inverse" onclick={handleClose} title="Close">
                                            <lightning-icon alternative-text="close" icon-name="utility:close" size="small" variant="inverse"></lightning-icon>
                                        </button>
                                        <template if:false={isEdit}>
                                            <h2 class="slds-text-heading_medium slds-hyphenate">Create New Document Checklist Item </h2>
                                        </template>
                                        <template if:true={isEdit}>
                                            <h2 class="slds-text-heading_medium slds-hyphenate">Edit {currentListItemName} </h2>
                                        </template>
                                    </header>
                                    <div class="slds-theme_default slds-p-around_medium">
                                        <lightning-record-edit-form object-api-name="DocumentChecklistItem" record-id={currentListItemId}>
                                            <lightning-layout multiple-rows style="height: max-content;">
                                                <lightning-layout-item padding="around-small" size="6">
                                                    <lightning-combobox name="docTypesCSVList" placeholder="Select Document Type" label="Document Type" onchange={handleTypeChange}
                                                                        options={docTypesOptions} required=true></lightning-combobox>
                                                </lightning-layout-item>
                                                <lightning-layout-item padding="around-small" size="6">
                                                    <lightning-input-field data-field="current-listitem-name" field-name="Name"
                                                                           value={currentListItemName}></lightning-input-field>
                                                </lightning-layout-item>
                                                <lightning-layout-item padding="around-small" size="6">
                                                    <lightning-combobox label="Status" name="status" onchange={handleStatusChange} options={statusValues}
                                                                        value={currentListItemStatus}></lightning-combobox>
                                                </lightning-layout-item>
                                                <lightning-layout-item>
                                                    <div class="slds-p-around_x-large slds-size_12-of-12">
                                                        <template if:true={isEdit}>
                                                            <lightning-input checked={documentRequired} label="Required" onchange={handleRequired}  type="checkbox" value={documentRequired}></lightning-input>
                                                        </template>
                                                    </div>
                                                </lightning-layout-item>
                                                <template if:false={isEdit}>
                                                    <template if:true={enableUpload}>
                                                        <lightning-layout-item padding="around-small" size="6">
                                                            <lightning-input accept=".png, .jpg, .jpeg, .pdf" label="Upload File" name="uploadFile" onchange={handleFileUpload}
                                                                             type="file"></lightning-input>
                                                            <div class="slds-m-around_small">
                                                                <template if:true={uploadFileName}>
                                                                    {uploadFileName}
                                                                </template>
                                                            </div>
                                                        </lightning-layout-item>
                                                    </template>
                                                </template>
                                                <template if:true={showReason}>
                                                    <lightning-layout-item padding="around-small" size="12">
                                                        <lightning-input-field data-field="current-listitem-reason" field-name="CMN_Reason__c" required="true"
                                                                               value={currentListItemReason}></lightning-input-field>
                                                    </lightning-layout-item>
                                                </template>
                                                <lightning-input-field class="slds-hide" data-field="current-listitem-id" field-name="Id"
                                                                       value={currentListItemId}></lightning-input-field>
                                            </lightning-layout>
                                        </lightning-record-edit-form>
                                    </div>
                                    <footer class="slds-modal__footer">
                                        <div class="slds-clearfix">
                                            <lightning-button class="slds-p-around_x-small slds-float_right" label="Save" onclick={handleSave}
                                                              variant="brand"></lightning-button>
                                            <lightning-button class="slds-p-around_x-small slds-float_right" label="Cancel" onclick={handleClose}
                                                              variant="neutral"></lightning-button>
                                        </div>
                                    </footer>
                                </div>
                            </section>
                            <div class="slds-backdrop slds-backdrop_open"></div>
                        </template>
                    </lightning-card>
                </div>
            </template>
    </template>
    <!-- Insto Client Onboarding -->
    <template if:true={clientOnboarding}>
        <lightning-card>
            <div if:true={isLoading}>
                <lightning-spinner alternative-text={helpText} class="spinner-medium" data-text={helpText} size="medium" variant="brand"></lightning-spinner>
            </div>
            <div class="slds-p-horizontal_large slds-border_bottom">
                <div class="slds-grid slds-grid_vertical-align-center">
                    <div class="slds-col">
                        <div class="slds-grid slds-grid_vertical-align-center">
                            <div class="slds-col_bump-left slds-m-bottom_x-small">
                                <lightning-icon alternative-text="Document Checklist Item" class="icon-bgcolor slds-m-right_medium" icon-name="standard:entitlement"
                                                size="medium"></lightning-icon>
                            </div>
                            <div class="slds-col">
                                <h2 class="slds-text-heading_small slds-p-bottom_xx-small">
                                    Document Checklist Items </h2>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="slds-card__body slds-card__body_inner slds-m-top_medium">
                <div class='slds-grid slds-grid_align-spread'>

                    <div class='slds-col slds-p-around_medium slds-m-vertical_x-small'>
                        Documents per page
                    </div>
                    <div class='slds-col slds-p-around_medium slds-large-size_1-of-7'>
                        <lightning-combobox
                                value={recordsPerPage}
                                variant="label-hidden"
                                class='record-per-page'
                                options={recordsPerPageOptions}
                                onchange={changeRecordPerPage}>
                        </lightning-combobox>
                    </div>

                    <div class='slds-col slds-p-around_medium slds-large-size_3-of-7'>
                    </div>

                    <div class='slds-col slds-p-around_medium slds-large-size_2-of-7'>
                                    <span class='slds-float_right'>
                                        <lightning-button-icon size='small'
                                                               disabled={disablePrior}
                                                               onclick={priorPage}
                                                               variant="container"
                                                               icon-name='utility:left'>

                                        </lightning-button-icon>

                                        Page&nbsp;

                                        <input
                                                class='slds-input record-per-page'
                                                type="number"
                                                value={pageNumber}
                                                onchange={handleChangePage}
                                                max={pageCount}
                                                min='1'
                                                step='1'/>

                                        &nbsp;of&nbsp;{pageCount}

                                        <lightning-button-icon size='small'
                                                               disabled={disableNext}
                                                               onclick={nextPage}
                                                               variant="container"
                                                               icon-name='utility:right'>

                                        </lightning-button-icon>
                                    </span>
                    </div>
                </div>
                <lightning-datatable columns={onboardingColumns} data={documentsToDisplay} data-id="DocumentList" default-sort-direction={defaultSortDirection} key-field="Id"
                                     onrowaction={handleRowAction} onrowselection={handleSelection} onsort={handleOnSort} sorted-by={sortedBy}
                                     sorted-direction={sortDirection}></lightning-datatable>
            </div>
        </lightning-card>
        <!--Upload-->
        <lightning-card if:true={isUpload}>
            <div class="slds-container_small">
                <section aria-describedby="modal-content-id-3" aria-labelledby="modal-heading-03" aria-modal="true" class="slds-modal slds-fade-in-open"
                         role="dialog" tabindex="-1">
                    <div class="slds-modal__container">
                        <div if:true={isLoading}>
                            <lightning-spinner alternative-text={helpText} class="spinner-medium" data-text={helpText} size="medium"
                                               variant="brand"></lightning-spinner>
                        </div>
                        <header class="slds-modal__header">
                            <div class="slds-col">
                                <h2 class="slds-text-heading_medium slds-hyphenate" id="modal-heading-onboarding-03">
                                    Upload Document on Checklist Item </h2>
                            </div>
                        </header>
                        <div class="slds-modal__content slds-p-around_medium" id="modal-content-id-onboarding-3">
                            <lightning-layout-item padding="around-small" size="6">
                                <lightning-input accept=".png, .jpg, .jpeg, .pdf" label="Upload File" name="uploadFile" onchange={handleFileUpload}
                                                 type="file"></lightning-input>
                                <div class="slds-m-around_small">
                                    <template if:true={uploadFileName}>
                                        {uploadFileName}
                                    </template>
                                </div>
                            </lightning-layout-item>
                        </div>
                        <footer class="slds-modal__footer">
                            <div class="slds-clearfix">
                                <lightning-button class="slds-p-around_x-small slds-float_right" label="Save" onclick={handleFetchFiles}
                                                  variant="brand"></lightning-button>

                                <lightning-button class="slds-p-around_x-small slds-float_right" label="Cancel" onclick={handleUploadClose}
                                                  variant="neutral"></lightning-button>
                            </div>
                        </footer>
                    </div>
                </section>
                <div class="slds-backdrop slds-backdrop_open"></div>
            </div>
        </lightning-card>
    </template>
    <c-cmn-lwc-toast></c-cmn-lwc-toast>
</template>